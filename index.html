<!DOCTYPE html>
<html lang="zh-Hant" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>首頁 | 全齡共融賦能生態圈 - Community Living Loop</title>
    <meta name="description" content="連結社區、健康與專業照護。探索附近活動、訂購營養餐點、申請專業輔具租借服務，您的所有需求都在這裡。">
    <meta name="keywords" content="銀髮族,社區服務,健康照護,輔具租借,營養餐點,長者活動,樂齡課程">
    
    <script src="https://cdn.tailwindcss.com"></script>
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link href="https://fonts.googleapis.com/css2?family=Noto+Serif+JP:wght@300;400;600;700&family=Noto+Sans+TC:wght@300;400;500;700&display=swap" rel="stylesheet">
    
    <script src="https://unpkg.com/lucide@latest"></script>
    
    <link rel="stylesheet" href="css/style.css">
    
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: { 
                        sans: ['Noto Sans TC', 'sans-serif'],
                        serif: ['Noto Serif JP', 'serif']
                    },
                    colors: {
                        primary: '#1E3A8A',
                        secondary: '#4ECDC4',
                        accent: '#F7DC6F',
                        coral: '#FFB6A3',
                        lavender: '#A78BFA',
                        success: '#10B981', // 新增成功色
                        warning: '#F59E0B'  // 新增警告色
                    },
                    animation: {
                        'pulse-slow': 'pulse 3s cubic-bezier(0.4, 0, 0.6, 1) infinite',
                    }
                }
            }
        }
    </script>
    <style>
        .modal-open { overflow: hidden; }
        .dashboard-card { transition: all 0.3s ease; }
        .dashboard-card:hover { transform: translateY(-2px); box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1); }
        /* 隱藏滾動條但保留功能 */
        .hide-scrollbar::-webkit-scrollbar { display: none; }
        .hide-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }
    </style>
</head>
<body class="bg-white text-gray-900">

    <nav class="fixed top-0 left-0 right-0 z-40 bg-white/95 backdrop-blur-sm border-b-2 border-secondary/30">
        <div class="container mx-auto px-4">
            <div class="flex items-center justify-between h-16">
                <a href="/" class="flex items-center gap-2 hover:opacity-80 transition-opacity">
                    <div class="flex flex-col">
                        <span class="font-bold text-lg leading-tight">全齡共融賦能生態圈</span>
                        <span class="text-xs text-gray-600">Community Living Loop</span>
                    </div>
                </a>

                <div class="hidden md:flex items-center gap-6">
                    <a href="#home" class="text-sm font-semibold transition-colors hover:text-secondary text-primary">Home</a>
                    <a href="#logic-flow" class="text-sm font-semibold transition-colors hover:text-secondary text-primary">How it Works</a>
                    <a href="#icope-match" class="text-sm font-semibold transition-colors hover:text-secondary text-primary">AI Matching</a>
                    <a href="#sop-center" class="text-sm font-semibold transition-colors hover:text-secondary text-primary">SOP Standard</a>
                    <a href="#dashboard-demo" class="text-sm font-semibold transition-colors hover:text-secondary text-primary">Dashboard</a>
                </div>

                <div class="hidden md:flex items-center gap-3">
                    <button class="p-2 rounded-full hover:bg-gray-100" onclick="openSearch()">
                        <i data-lucide="search" class="w-5 h-5"></i>
                    </button>
                    <button onclick="openDashboardModal()" class="bg-primary hover:bg-primary/90 text-white rounded-full px-6 py-2 font-medium transition flex items-center gap-2 shadow-lg">
                        <i data-lucide="log-in" class="w-4 h-4"></i>
                        登入生態系
                    </button>
                    <button class="p-2 rounded-full hover:bg-gray-100" onclick="toggleLanguage()">
                        <i data-lucide="globe" class="w-5 h-5"></i>
                    </button>
                </div>

                <button onclick="toggleMobileMenu()" class="md:hidden p-2 rounded-lg hover:bg-gray-100 transition-colors">
                    <i data-lucide="menu" class="w-6 h-6 text-gray-700" id="menu-icon"></i>
                </button>
            </div>
            
            <div id="mobile-menu" class="hidden md:hidden py-4 border-t border-gray-200">
                <div class="flex flex-col gap-2">
                    <a href="#home" class="px-4 py-3 rounded-lg text-sm font-medium text-gray-700 hover:bg-gray-100">Home</a>
                    <a href="#icope-match" class="px-4 py-3 rounded-lg text-sm font-medium text-gray-700 hover:bg-gray-100">AI Matching</a>
                    <a href="#sop-center" class="px-4 py-3 rounded-lg text-sm font-medium text-gray-700 hover:bg-gray-100">SOP Standard</a>
                    <button onclick="openDashboardModal()" class="mx-4 mt-2 bg-primary text-white rounded-lg py-3 font-medium">登入生態系後台</button>
                </div>
            </div>
        </div>
    </nav>

    <div class="pt-16">
        
        <section id="home" class="relative overflow-hidden py-12 md:py-20">
            <div class="absolute top-0 right-0 w-[600px] h-[600px] bg-secondary opacity-15 blur-3xl organic-shape" style="clip-path: polygon(30% 0%, 100% 0%, 100% 70%, 60% 100%, 0% 80%, 0% 30%); z-index: 0;"></div>
            <div class="absolute bottom-0 left-0 w-[500px] h-[500px] bg-accent opacity-15 blur-3xl organic-shape" style="clip-path: polygon(0% 20%, 50% 0%, 100% 30%, 80% 100%, 20% 100%, 0% 70%); z-index: 0; animation-delay: 2s;"></div>
            
            <div class="container mx-auto px-4 relative fade-in" style="z-index: 1;">
                <div class="grid lg:grid-cols-2 gap-8 items-center">
                    <div class="order-2 lg:order-1">
                        <div class="inline-block mb-4 px-4 py-2 bg-white border-2 border-dashed border-secondary rounded-full animate-pulse-slow">
                            <span class="text-sm font-medium text-primary flex items-center gap-2">
                                <span class="w-2 h-2 bg-green-500 rounded-full"></span>
                                System Status: Live Matching
                            </span>
                        </div>
                        
                        <h1 class="text-4xl md:text-6xl lg:text-7xl font-bold mb-6 leading-tight">
                            <span class="text-primary block">Data-Driven</span>
                            <span class="text-secondary block">Precision Care</span>
                            <span class="text-primary block">Ecosystem</span>
                        </h1>
                        
                        <p class="text-lg md:text-xl text-gray-700 mb-8 max-w-xl">
                            我們將 ICOPE 篩檢數據轉化為具體的服務處方箋，透過 AI 自動媒合鄰近的專業健康大使，讓「需求」與「服務」在社區內無縫接軌。
                        </p>
                        
                        <div class="flex flex-col sm:flex-row gap-4">
                            <button onclick="openIcopeModal()" class="bg-primary hover:bg-primary/90 text-white px-8 py-4 rounded-full text-lg font-medium shadow-lg hover:shadow-xl transition-all flex items-center justify-center gap-2">
                                <i data-lucide="activity" class="w-5 h-5"></i>
                                開始 ICOPE 快篩
                            </button>
                            <button onclick="openDashboardModal()" class="bg-white border-2 border-primary text-primary hover:bg-gray-50 px-8 py-4 rounded-full text-lg font-medium transition-all flex items-center justify-center gap-2">
                                <i data-lucide="layout-dashboard" class="w-5 h-5"></i>
                                體驗三方後台
                            </button>
                        </div>
                    </div>

                    <div class="order-1 lg:order-2 relative">
                        <div class="bg-white rounded-[2rem] p-6 shadow-2xl border border-gray-100 relative z-10 card-hover">
                            <div class="flex items-center justify-between mb-4 border-b pb-4">
                                <div class="flex items-center gap-3">
                                    <div class="w-10 h-10 rounded-full bg-gray-200 overflow-hidden">
                                        <img src="images/caregiver-1.jpg" class="w-full h-full object-cover">
                                    </div>
                                    <div>
                                        <p class="font-bold text-sm">系統通知中心</p>
                                        <p class="text-xs text-gray-500">剛剛</p>
                                    </div>
                                </div>
                                <span class="bg-green-100 text-green-700 text-xs px-2 py-1 rounded-full flex items-center gap-1">
                                    <i data-lucide="check-circle" class="w-3 h-3"></i> 媒合成功
                                </span>
                            </div>
                            <div class="space-y-3">
                                <p class="text-sm font-medium">王大明 (長輩) <span class="text-gray-400">→</span> 需求：肌力訓練</p>
                                <div class="h-1 w-full bg-gray-100 rounded-full overflow-hidden">
                                    <div class="h-full bg-secondary w-full"></div>
                                </div>
                                <p class="text-sm font-medium text-primary">已自動指派：健康大使 李秀英</p>
                                <p class="text-xs text-gray-500 flex items-center gap-1">
                                    <i data-lucide="map-pin" class="w-3 h-3"></i> 距離 500m (虎尾社區據點)
                                </p>
                            </div>
                        </div>
                        <div class="absolute -top-4 -right-4 w-24 h-24 bg-coral rounded-full opacity-60 blur-xl"></div>
                        <div class="absolute -bottom-4 -left-4 w-32 h-32 bg-lavender rounded-full opacity-40 blur-xl"></div>
                    </div>
                </div>
            </div>
        </section>

        <section id="logic-flow" class="py-12 bg-white border-b border-gray-100">
            <div class="container mx-auto px-4">
                <div class="text-center mb-10">
                    <h2 class="text-2xl font-bold text-primary">系統運作邏輯 (Logic Flow)</h2>
                    <p class="text-gray-500">從數據啟動到價值結算的完整閉環</p>
                </div>
                <div class="flex flex-col md:flex-row justify-between items-center gap-4 relative">
                    <div class="hidden md:block absolute top-1/2 left-0 w-full h-1 bg-gray-100 -z-10 transform -translate-y-1/2"></div>
                    
                    <div class="bg-white p-4 rounded-xl border border-gray-200 shadow-sm w-full md:w-48 text-center relative hover:scale-105 transition-transform">
                        <div class="w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-3 text-primary">1</div>
                        <h3 class="font-bold mb-1">數據啟動</h3>
                        <p class="text-xs text-gray-500">據點 ICOPE 篩檢<br>回傳中台</p>
                    </div>
                     <div class="bg-white p-4 rounded-xl border border-gray-200 shadow-sm w-full md:w-48 text-center relative hover:scale-105 transition-transform">
                        <div class="w-10 h-10 bg-purple-100 rounded-full flex items-center justify-center mx-auto mb-3 text-purple-600">2</div>
                        <h3 class="font-bold mb-1">AI 需求診斷</h3>
                        <p class="text-xs text-gray-500">產生服務處方箋<br>(如:口腔訓練)</p>
                    </div>
                     <div class="bg-white p-4 rounded-xl border border-gray-200 shadow-sm w-full md:w-48 text-center relative hover:scale-105 transition-transform">
                        <div class="w-10 h-10 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-3 text-green-600">3</div>
                        <h3 class="font-bold mb-1">自動媒合</h3>
                        <p class="text-xs text-gray-500">推播任務給<br>鄰近健康大使</p>
                    </div>
                     <div class="bg-white p-4 rounded-xl border border-gray-200 shadow-sm w-full md:w-48 text-center relative hover:scale-105 transition-transform">
                        <div class="w-10 h-10 bg-orange-100 rounded-full flex items-center justify-center mx-auto mb-3 text-orange-600">4</div>
                        <h3 class="font-bold mb-1">賦能執行</h3>
                        <p class="text-xs text-gray-500">依 SOP 授課<br>領取生活選品</p>
                    </div>
                     <div class="bg-white p-4 rounded-xl border border-gray-200 shadow-sm w-full md:w-48 text-center relative hover:scale-105 transition-transform">
                        <div class="w-10 h-10 bg-yellow-100 rounded-full flex items-center justify-center mx-auto mb-3 text-yellow-600">5</div>
                        <h3 class="font-bold mb-1">價值結算</h3>
                        <p class="text-xs text-gray-500">自動分潤撥款<br>發放點數獎勵</p>
                    </div>
                </div>
            </div>
        </section>

        <section id="icope-match" class="section-padding bg-gray-50">
            <div class="container mx-auto px-4">
                <div class="grid lg:grid-cols-2 gap-12 items-center">
                    <div>
                        <span class="text-secondary font-bold tracking-wider uppercase mb-2 block">The Brain</span>
                        <h2 class="text-3xl md:text-4xl font-bold text-primary mb-6">媒合機制：精準供需對接</h2>
                        <ul class="space-y-6">
                            <li class="flex gap-4">
                                <div class="w-12 h-12 bg-white rounded-xl shadow-md flex items-center justify-center shrink-0 text-secondary">
                                    <i data-lucide="brain-circuit" class="w-6 h-6"></i>
                                </div>
                                <div>
                                    <h3 class="text-xl font-bold mb-2">自動化人與事配對</h3>
                                    <p class="text-gray-600">當系統偵測到長輩有「肌肉流失」風險，立即徵求具備「運動賦能證照」的專家。</p>
                                </div>
                            </li>
                            <li class="flex gap-4">
                                <div class="w-12 h-12 bg-white rounded-xl shadow-md flex items-center justify-center shrink-0 text-secondary">
                                    <i data-lucide="map" class="w-6 h-6"></i>
                                </div>
                                <div>
                                    <h3 class="text-xl font-bold mb-2">地理與時間最佳化</h3>
                                    <p class="text-gray-600">優先鎖定「社區健康轉運站」周邊 500 公尺內的專家，降低交通成本，實現真正的步行生活圈。</p>
                                </div>
                            </li>
                        </ul>
                        <button onclick="openIcopeModal()" class="mt-8 px-6 py-3 bg-white border-2 border-secondary text-secondary font-bold rounded-xl hover:bg-secondary hover:text-white transition-colors flex items-center gap-2">
                            <i data-lucide="play-circle" class="w-5 h-5"></i>
                            模擬媒合流程
                        </button>
                    </div>
                    <div class="bg-white rounded-3xl p-2 shadow-xl">
                        <img src="images/sop-flow.jpg" alt="System Flow" class="w-full h-auto rounded-2xl">
                    </div>
                </div>
            </div>
        </section>

        <section id="sop-center" class="section-padding bg-white">
            <div class="container mx-auto px-4">
                <div class="text-center mb-12">
                    <span class="text-primary font-bold tracking-wider uppercase mb-2 block">The Standard</span>
                    <h2 class="text-3xl md:text-4xl font-bold text-primary mb-4">兩大核心 SOP 制定模組</h2>
                    <p class="text-gray-600 max-w-2xl mx-auto">透過數位化確保專業不因擴張而失真，打造可複製的服務模式。</p>
                </div>

                <div class="grid md:grid-cols-2 gap-8">
                    <div class="border-2 border-dashed border-gray-200 rounded-3xl p-8 hover:border-secondary transition-colors group">
                        <div class="w-16 h-16 bg-blue-50 rounded-2xl flex items-center justify-center mb-6 text-primary group-hover:bg-primary group-hover:text-white transition-colors">
                            <i data-lucide="store" class="w-8 h-8"></i>
                        </div>
                        <h3 class="text-2xl font-bold mb-4">1. 社區據點場域標準</h3>
                        <ul class="space-y-3 text-gray-600 mb-6">
                            <li class="flex items-start gap-2">
                                <i data-lucide="check-circle-2" class="w-5 h-5 text-green-500 shrink-0 mt-0.5"></i>
                                <span><strong>空間模組化：</strong>標準化健康轉運站櫃檯與無障礙動線設計。</span>
                            </li>
                            <li class="flex items-start gap-2">
                                <i data-lucide="check-circle-2" class="w-5 h-5 text-green-500 shrink-0 mt-0.5"></i>
                                <span><strong>運營流程數位化：</strong>從簽到、數據上傳到零庫存取貨的自動路徑。</span>
                            </li>
                        </ul>
                        <div class="bg-gray-50 rounded-xl p-4">
                            <p class="text-xs text-gray-400 uppercase font-bold mb-2">Downloadable Resources</p>
                            <div class="flex items-center justify-between bg-white p-3 rounded-lg shadow-sm border border-gray-100 cursor-pointer hover:bg-gray-50" onclick="alert('下載據點營運手冊 PDF')">
                                <div class="flex items-center gap-2">
                                    <i data-lucide="file-text" class="w-4 h-4 text-red-500"></i>
                                    <span class="text-sm font-medium">據點營運手冊 V2.0.pdf</span>
                                </div>
                                <i data-lucide="download" class="w-4 h-4 text-gray-400"></i>
                            </div>
                        </div>
                    </div>

                    <div class="border-2 border-dashed border-gray-200 rounded-3xl p-8 hover:border-accent transition-colors group">
                        <div class="w-16 h-16 bg-yellow-50 rounded-2xl flex items-center justify-center mb-6 text-yellow-600 group-hover:bg-accent group-hover:text-white transition-colors">
                            <i data-lucide="graduation-cap" class="w-8 h-8"></i>
                        </div>
                        <h3 class="text-2xl font-bold mb-4">2. 專家培訓專業標準</h3>
                        <ul class="space-y-3 text-gray-600 mb-6">
                            <li class="flex items-start gap-2">
                                <i data-lucide="check-circle-2" class="w-5 h-5 text-green-500 shrink-0 mt-0.5"></i>
                                <span><strong>技術轉譯：</strong>引進日本 SEIDA 技術，拆解為易學的數位教案（如口腔照護）。</span>
                            </li>
                            <li class="flex items-start gap-2">
                                <i data-lucide="check-circle-2" class="w-5 h-5 text-green-500 shrink-0 mt-0.5"></i>
                                <span><strong>認證分級制度：</strong>線上考核通過即核發數位證照，授權接單。</span>
                            </li>
                        </ul>
                        <div class="bg-gray-50 rounded-xl p-4">
                            <p class="text-xs text-gray-400 uppercase font-bold mb-2">Digital Certification</p>
                            <div class="flex items-center gap-3">
                                <div class="w-10 h-10 bg-primary text-white rounded-full flex items-center justify-center font-bold text-xs">A級</div>
                                <div>
                                    <p class="text-sm font-bold">口腔照護指導員</p>
                                    <p class="text-xs text-green-600">已認證：李秀英</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <section class="section-padding bg-gradient-to-br from-primary via-blue-800 to-teal-700 text-white">
            <div class="container mx-auto px-4">
                <div class="text-center fade-in">
                    <h2 class="text-4xl md:text-5xl font-bold mb-4">All-Age Inclusive Urban Regeneration Plan</h2>
                    <p class="text-blue-200 text-sm uppercase tracking-wider mb-8">Cool-Aging Park</p>
                    <p class="text-lg text-blue-100 max-w-3xl mx-auto leading-relaxed">
                        We propose not just a healthcare system, but an urban regeneration movement centered on 'Cool Aging'. 
                    </p>
                </div>
            </div>
        </section>

        <section id="courses" class="section-padding relative overflow-hidden">
             <div class="container mx-auto px-4 relative" style="z-index: 1;">
                <div class="text-center mb-12 fade-in">
                    <h2 class="text-4xl md:text-5xl font-bold text-primary mb-4">CONTENTS</h2>
                    <p class="text-xl text-gray-600">探索我們的服務內容</p>
                </div>
                <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-6">
                    <a href="#activities" class="lg:col-span-2">
                        <div class="group bg-gradient-to-br from-secondary to-secondary/80 rounded-[2rem] p-8 border-4 border-dashed border-white hover-scale cursor-pointer">
                            <h3 class="text-3xl font-bold text-white mb-2">MARKET</h3>
                            <p class="text-white/90 text-lg">社區活動</p>
                            </div>
                    </a>
                    <a href="/courses.html">
                        <div class="group bg-gradient-to-br from-accent to-accent/80 rounded-[2rem] p-8 border-4 border-dashed border-white hover-scale cursor-pointer h-full">
                             <h3 class="text-3xl font-bold text-primary mb-2">CULTURE</h3>
                             <p class="text-primary/80 text-lg mb-4">培訓課程</p>
                        </div>
                    </a>
                    </div>
            </div>
        </section>

        <section class="section-padding bg-gradient-to-br from-primary via-blue-900 to-primary text-white">
            <div class="container mx-auto px-4">
                <div class="text-center mb-12 fade-in">
                    <h2 class="text-4xl md:text-5xl font-bold mb-4">高齡化社會的四大結構性風險</h2>
                </div>
                <div class="space-y-4">
                     <div class="bg-white/10 backdrop-blur-sm rounded-2xl p-6 border-2 border-white/20 hover:bg-white/15 transition-all cursor-pointer">
                        <h3 class="text-2xl font-bold mb-1">生活空間的功能斷裂</h3>
                     </div>
                     </div>
            </div>
        </section>

        <section id="dashboard-demo" class="section-padding bg-gradient-to-br from-gray-900 to-primary text-white relative overflow-hidden">
            <div class="absolute top-0 right-0 w-96 h-96 bg-secondary/20 rounded-full blur-3xl"></div>
            <div class="container mx-auto px-4 relative z-10 text-center">
                <span class="text-secondary font-bold tracking-wider uppercase mb-2 block">UI/UX Experience</span>
                <h2 class="text-3xl md:text-4xl font-bold mb-6">三方視角：看板式管理</h2>
                <p class="text-blue-200 mb-10 max-w-2xl mx-auto">為了讓三方都看得懂，我們將複雜流程簡化為直覺的儀表板。點擊下方按鈕，親自體驗不同角色的操作介面。</p>

                <button onclick="openDashboardModal()" class="group relative inline-flex items-center justify-center px-8 py-4 text-lg font-bold text-white transition-all duration-200 bg-secondary font-pj rounded-full focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-secondary animate-bounce">
                    <span class="absolute inset-0 transition-all duration-1000 group-hover:animate-pulse rounded-full bg-secondary opacity-50"></span>
                    <span class="relative flex items-center gap-2">
                        <i data-lucide="monitor-smartphone" class="w-6 h-6"></i>
                        進入全生態系管理後台模擬
                    </span>
                </button>
            </div>
        </section>

        <section id="calendar" class="section-padding bg-gray-50">
            <div class="container mx-auto px-4">
                <div class="text-center mb-12 fade-in">
                    <h2 class="text-4xl md:text-5xl font-bold text-primary mb-4">服務網絡地圖</h2>
                </div>
                <div class="bg-white rounded-3xl shadow-xl overflow-hidden mb-8">
                    <div class="aspect-video bg-gray-200 relative">
                        <iframe src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d14632.123456789!2d120.4372!3d23.7069!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x0%3A0x0!2zMjPCsDQyJzI0LjgiTiAxMjDCsDI2JzE0LjAiRQ!5e0!3m2!1szh-TW!2stw!4v1234567890" width="100%" height="100%" style="border:0;" allowfullscreen="" loading="lazy"></iframe>
                    </div>
                </div>
            </div>
        </section>

        <footer class="bg-gray-900 text-white py-12 border-t border-gray-800">
            <div class="container mx-auto px-4 text-center">
                <h3 class="text-2xl font-bold mb-2">全齡共融賦能生態圈</h3>
                <p class="text-xs text-gray-500">© 2026 Community Living Loop. All rights reserved.</p>
            </div>
        </footer>

        <button id="back-to-top" onclick="scrollToTop()" class="fixed bottom-8 right-8 bg-primary text-white w-12 h-12 rounded-full shadow-lg hover:bg-primary/90 transition z-40 flex items-center justify-center" style="opacity: 0; visibility: hidden;">
            <i data-lucide="arrow-up" class="w-5 h-5"></i>
        </button>

    </div>

    <div id="icopeModal" class="fixed inset-0 z-50 hidden overflow-y-auto" aria-labelledby="modal-title" role="dialog" aria-modal="true">
        <div class="flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0">
            <div class="fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity" aria-hidden="true" onclick="closeIcopeModal()"></div>
            <span class="hidden sm:inline-block sm:align-middle sm:h-screen" aria-hidden="true">&#8203;</span>
            
            <div class="inline-block align-bottom bg-white rounded-2xl text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg w-full">
                <div class="bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4">
                    <div id="icopeStep1">
                        <div class="mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-blue-100">
                            <i data-lucide="activity" class="h-6 w-6 text-primary"></i>
                        </div>
                        <div class="mt-3 text-center sm:mt-5">
                            <h3 class="text-lg leading-6 font-medium text-gray-900" id="modal-title">ICOPE 簡易快篩</h3>
                            <div class="mt-4 text-left space-y-4">
                                <div>
                                    <label class="block text-sm font-medium text-gray-700">最近是否感覺小腿無力，或走路變慢？</label>
                                    <div class="mt-2 flex gap-4">
                                        <button class="flex-1 py-2 border rounded-lg hover:bg-red-50 hover:border-red-500 focus:ring-2 ring-red-500" onclick="selectOption(this)">是，有點無力</button>
                                        <button class="flex-1 py-2 border rounded-lg hover:bg-green-50 hover:border-green-500" onclick="selectOption(this)">否，很正常</button>
                                    </div>
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700">進食時是否容易嗆到？</label>
                                    <div class="mt-2 flex gap-4">
                                        <button class="flex-1 py-2 border rounded-lg hover:bg-red-50 hover:border-red-500 focus:ring-2 ring-red-500" onclick="selectOption(this)">偶爾會</button>
                                        <button class="flex-1 py-2 border rounded-lg hover:bg-green-50 hover:border-green-500" onclick="selectOption(this)">不會</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="mt-5 sm:mt-6">
                            <button type="button" onclick="processIcope()" class="w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-primary text-base font-medium text-white hover:bg-primary/90 focus:outline-none sm:text-sm">
                                提交並分析
                            </button>
                        </div>
                    </div>

                    <div id="icopeStep2" class="hidden text-center py-10">
                        <div class="animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto mb-4"></div>
                        <h3 class="text-lg font-bold text-gray-900">AI 分析中...</h3>
                        <p class="text-sm text-gray-500">正在比對資料庫，媒合鄰近專家...</p>
                    </div>

                    <div id="icopeStep3" class="hidden">
                        <div class="text-center mb-4">
                            <div class="mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-green-100 mb-2">
                                <i data-lucide="check" class="h-6 w-6 text-green-600"></i>
                            </div>
                            <h3 class="text-lg font-bold text-gray-900">媒合成功！</h3>
                            <p class="text-sm text-gray-500">已為您找到最適合的健康大使</p>
                        </div>
                        
                        <div class="bg-gray-50 rounded-xl p-4 border border-gray-200 flex gap-4 items-start">
                            <img src="images/caregiver-1.jpg" class="w-16 h-16 rounded-full object-cover border-2 border-white shadow-sm">
                            <div class="flex-1 text-left">
                                <div class="flex justify-between items-start">
                                    <h4 class="font-bold text-lg">李秀英 <span class="text-xs bg-primary text-white px-2 py-0.5 rounded-full ml-1">認證 A 級</span></h4>
                                    <span class="text-xs text-gray-500">距離 300m</span>
                                </div>
                                <p class="text-sm text-secondary font-medium mb-1">專長：肌力訓練、口腔照護</p>
                                <p class="text-xs text-gray-600">「根據您的篩檢結果，建議每週進行 2 次口腔與下肢肌力訓練。」</p>
                            </div>
                        </div>

                        <div class="mt-5 sm:mt-6">
                            <button type="button" onclick="closeIcopeModal()" class="w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-secondary text-base font-medium text-white hover:bg-secondary/90 focus:outline-none sm:text-sm">
                                預約服務
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div id="dashboardModal" class="fixed inset-0 z-50 hidden overflow-y-auto" aria-labelledby="modal-title" role="dialog" aria-modal="true">
        <div class="flex items-center justify-center min-h-screen px-4 pt-4 pb-20 text-center sm:block sm:p-0">
            <div class="fixed inset-0 bg-gray-900 bg-opacity-90 transition-opacity" aria-hidden="true" onclick="closeDashboardModal()"></div>
            
            <div class="inline-block align-middle bg-gray-50 rounded-xl text-left overflow-hidden shadow-2xl transform transition-all sm:my-8 sm:max-w-5xl w-full min-h-[600px] flex flex-col">
                
                <div class="bg-white border-b px-6 py-4 flex flex-col md:flex-row justify-between items-center gap-4">
                    <h3 class="text-xl font-bold text-gray-800 flex items-center gap-2">
                        <i data-lucide="layout" class="w-5 h-5"></i> 生態系管理後台
                    </h3>
                    <div class="flex bg-gray-100 p-1 rounded-lg">
                        <button onclick="switchRole('user')" id="btn-user" class="px-4 py-2 rounded-md text-sm font-medium transition-all bg-white shadow-sm text-primary">長輩/家屬</button>
                        <button onclick="switchRole('community')" id="btn-community" class="px-4 py-2 rounded-md text-sm font-medium transition-all text-gray-500 hover:text-gray-900">據點店長</button>
                        <button onclick="switchRole('expert')" id="btn-expert" class="px-4 py-2 rounded-md text-sm font-medium transition-all text-gray-500 hover:text-gray-900">健康大使</button>
                    </div>
                    <button onclick="closeDashboardModal()" class="text-gray-400 hover:text-gray-600">
                        <i data-lucide="x" class="w-6 h-6"></i>
                    </button>
                </div>

                <div class="p-6 flex-1 overflow-y-auto bg-gray-50" id="dashboardContent">
                    </div>

            </div>
        </div>
    </div>

    <script src="js/main.js"></script>
    <script>
        // 初始化 Lucide Icons
        lucide.createIcons();

        // --- ICOPE Modal Logic ---
        function openIcopeModal() {
            document.getElementById('icopeModal').classList.remove('hidden');
            document.getElementById('icopeStep1').classList.remove('hidden');
            document.getElementById('icopeStep2').classList.add('hidden');
            document.getElementById('icopeStep3').classList.add('hidden');
        }

        function closeIcopeModal() {
            document.getElementById('icopeModal').classList.add('hidden');
        }

        function selectOption(btn) {
            const parent = btn.parentElement;
            const buttons = parent.getElementsByTagName('button');
            for(let b of buttons) {
                b.classList.remove('bg-red-50', 'border-red-500', 'ring-2', 'ring-red-500', 'bg-green-50', 'border-green-500');
            }
            if(btn.innerText.includes('是') || btn.innerText.includes('偶爾')) {
                btn.classList.add('bg-red-50', 'border-red-500', 'ring-2', 'ring-red-500');
            } else {
                btn.classList.add('bg-green-50', 'border-green-500');
            }
        }

        function processIcope() {
            document.getElementById('icopeStep1').classList.add('hidden');
            document.getElementById('icopeStep2').classList.remove('hidden');
            
            setTimeout(() => {
                document.getElementById('icopeStep2').classList.add('hidden');
                document.getElementById('icopeStep3').classList.remove('hidden');
            }, 2000);
        }

        // --- Dashboard Logic ---
        function openDashboardModal() {
            document.getElementById('dashboardModal').classList.remove('hidden');
            switchRole('user');
        }

        function closeDashboardModal() {
            document.getElementById('dashboardModal').classList.add('hidden');
        }

        // Dashboard Data
        const dashboardData = {
            'user': {
                title: '我的健康存摺 (使用者視角)',
                content: `
                    <div class="grid md:grid-cols-3 gap-6 mb-8">
                        <div class="bg-white p-6 rounded-xl shadow-sm border border-blue-100 dashboard-card">
                            <p class="text-sm text-gray-500 mb-1">ICOPE 健康分數</p>
                            <h3 class="text-4xl font-bold text-primary">82 <span class="text-sm font-normal text-green-500">▲ 持穩</span></h3>
                            <p class="text-xs text-gray-400 mt-2">上次檢測：3天前</p>
                        </div>
                        <div class="bg-white p-6 rounded-xl shadow-sm border border-blue-100 dashboard-card">
                            <p class="text-sm text-gray-500 mb-1">累積健康點數</p>
                            <h3 class="text-4xl font-bold text-accent">1,250 <span class="text-sm font-normal text-gray-500">pts</span></h3>
                        </div>
                        <div class="bg-white p-6 rounded-xl shadow-sm border border-blue-100 dashboard-card">
                            <p class="text-sm text-gray-500 mb-1">下一次課程</p>
                            <h3 class="text-xl font-bold text-gray-800">口腔機能訓練</h3>
                            <p class="text-xs text-primary mt-2">明日 14:00 @ 虎尾據點</p>
                        </div>
                    </div>
                    <div class="bg-white rounded-xl shadow-sm border border-gray-200 p-6">
                        <h4 class="font-bold text-lg mb-4 text-gray-800">推薦給您的服務處方箋</h4>
                        <div class="space-y-4">
                            <div class="flex items-center justify-between p-4 bg-gray-50 rounded-lg border border-gray-100">
                                <div class="flex items-center gap-4">
                                    <div class="w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center text-primary">
                                        <i data-lucide="dumbbell" class="w-6 h-6"></i>
                                    </div>
                                    <div>
                                        <p class="font-bold text-gray-800">下肢肌力強化班</p>
                                        <p class="text-sm text-gray-500">針對行走變慢改善 | 專家：陳志豪</p>
                                    </div>
                                </div>
                                <button class="px-4 py-2 bg-primary text-white text-sm rounded-lg hover:bg-primary/90">立即預約</button>
                            </div>
                        </div>
                    </div>
                `
            },
            'community': {
                title: '據點營運儀表板 (經營者視角)',
                content: `
                    <div class="grid md:grid-cols-4 gap-6 mb-8">
                        <div class="bg-white p-5 rounded-xl shadow-sm border border-green-100 dashboard-card">
                            <p class="text-sm text-gray-500">今日訪客數</p>
                            <h3 class="text-3xl font-bold text-gray-800">45 <span class="text-xs text-green-500">▲ 12%</span></h3>
                        </div>
                         <div class="bg-white p-5 rounded-xl shadow-sm border border-green-100 dashboard-card">
                            <p class="text-sm text-gray-500">專家到場率</p>
                            <h3 class="text-3xl font-bold text-green-600">100%</h3>
                        </div>
                         <div class="bg-white p-5 rounded-xl shadow-sm border border-green-100 dashboard-card">
                            <p class="text-sm text-gray-500">待領包裹 (零庫存)</p>
                            <h3 class="text-3xl font-bold text-orange-500">8 <span class="text-xs text-gray-400">件</span></h3>
                        </div>
                         <div class="bg-white p-5 rounded-xl shadow-sm border border-green-100 dashboard-card">
                            <p class="text-sm text-gray-500">本月分潤預估</p>
                            <h3 class="text-3xl font-bold text-gray-800">$12K</h3>
                        </div>
                    </div>
                    <div class="grid md:grid-cols-2 gap-6">
                        <div class="bg-white rounded-xl shadow-sm border border-gray-200 p-6">
                            <h4 class="font-bold text-lg mb-4 text-gray-800">今日活動排程</h4>
                            <ul class="space-y-3">
                                <li class="flex justify-between items-center border-b pb-2">
                                    <span class="flex items-center gap-2"><div class="w-2 h-2 bg-green-500 rounded-full"></div> 10:00 銀髮瑜珈</span>
                                    <span class="text-sm bg-green-100 text-green-700 px-2 py-1 rounded">進行中</span>
                                </li>
                                <li class="flex justify-between items-center border-b pb-2">
                                    <span class="flex items-center gap-2"><div class="w-2 h-2 bg-gray-300 rounded-full"></div> 14:00 口腔保健</span>
                                    <span class="text-sm text-gray-500">李秀英 老師</span>
                                </li>
                            </ul>
                        </div>
                        <div class="bg-white rounded-xl shadow-sm border border-gray-200 p-6">
                            <h4 class="font-bold text-lg mb-4 text-gray-800">行政待辦事項</h4>
                            <div class="flex items-center gap-3 p-3 bg-red-50 border border-red-100 rounded-lg mb-2">
                                <i data-lucide="alert-circle" class="text-red-500"></i>
                                <span class="text-sm text-red-700">3 位新會員尚未完成 ICOPE 初篩</span>
                            </div>
                        </div>
                    </div>
                `
            },
            'expert': {
                title: '個人賦能工單 (健康大使視角)',
                content: `
                    <div class="grid md:grid-cols-3 gap-6 mb-8">
                        <div class="bg-white p-6 rounded-xl shadow-sm border border-purple-100 dashboard-card">
                            <p class="text-sm text-gray-500 mb-1">本月接單數</p>
                            <h3 class="text-4xl font-bold text-purple-600">24 <span class="text-sm font-normal text-gray-500">堂</span></h3>
                        </div>
                        <div class="bg-white p-6 rounded-xl shadow-sm border border-purple-100 dashboard-card">
                            <p class="text-sm text-gray-500 mb-1">學員滿意度</p>
                            <h3 class="text-4xl font-bold text-yellow-500">4.9 <span class="text-sm font-normal text-gray-400">/ 5.0</span></h3>
                        </div>
                        <div class="bg-white p-6 rounded-xl shadow-sm border border-purple-100 dashboard-card">
                            <p class="text-sm text-gray-500 mb-1">預估收入</p>
                            <h3 class="text-4xl font-bold text-gray-800">$28,500</h3>
                        </div>
                    </div>
                    <div class="bg-white rounded-xl shadow-sm border border-gray-200 p-6">
                        <h4 class="font-bold text-lg mb-4 text-gray-800">最新派課任務 (AI 媒合)</h4>
                        <div class="space-y-4">
                            <div class="flex flex-col sm:flex-row items-start sm:items-center justify-between p-4 bg-purple-50 rounded-xl border border-purple-100">
                                <div class="flex items-center gap-4 mb-3 sm:mb-0">
                                    <div class="w-12 h-12 bg-purple-200 rounded-full flex items-center justify-center text-purple-700 font-bold">新</div>
                                    <div>
                                        <p class="font-bold text-gray-900">個案：張爺爺 (需求：防跌訓練)</p>
                                        <p class="text-sm text-gray-600">地點：虎尾社區中心 (距離 1.2km)</p>
                                    </div>
                                </div>
                                <div class="flex gap-2 w-full sm:w-auto">
                                    <button class="flex-1 sm:flex-none px-4 py-2 bg-purple-600 text-white rounded-lg text-sm hover:bg-purple-700 shadow-md">確認接單</button>
                                </div>
                            </div>
                        </div>
                    </div>
                `
            }
        };

        function switchRole(role) {
            ['user', 'community', 'expert'].forEach(r => {
                const btn = document.getElementById(`btn-${r}`);
                if (r === role) {
                    btn.classList.remove('text-gray-500', 'bg-transparent');
                    btn.classList.add('bg-white', 'shadow-sm', 'text-primary'); 
                    if(role === 'community') btn.classList.add('text-green-600');
                    if(role === 'expert') btn.classList.add('text-purple-600');
                } else {
                    btn.classList.add('text-gray-500', 'bg-transparent');
                    btn.classList.remove('bg-white', 'shadow-sm', 'text-primary', 'text-green-600', 'text-purple-600');
                }
            });

            const data = dashboardData[role];
            const contentDiv = document.getElementById('dashboardContent');
            contentDiv.innerHTML = `
                <h2 class="text-2xl font-bold mb-6 text-gray-800">${data.title}</h2>
                ${data.content}
            `;
            lucide.createIcons();
        }
    </script>
</body>
</html>
