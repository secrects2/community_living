<!DOCTYPE html>
<html lang="zh-Hant" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ¨‚é½¡ç”Ÿæ´»ç¶² | è™å°¾å…¨é½¡å…±èç”Ÿæ´»åœˆ</title>
    <meta name="description" content="è™å°¾äººçš„å…¨é½¡éŠæ¨‚åœ’ï¼é€£çµç¤¾å€ã€å¥åº·èˆ‡å°ˆæ¥­ç…§è­·ã€‚">
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@300;400;500;700&display=swap" rel="stylesheet">
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: { sans: ['Noto Sans TC', 'sans-serif'] },
                    colors: {
                        brand: {
                            green: '#669644',
                            orange: '#E87A30',
                            light: '#F4F8F1',
                            yellow: '#F4B63F',
                            line: '#06C755' // LINE å®˜æ–¹ç¶ è‰²
                        }
                    },
                    animation: {
                        'bounce-slow': 'bounce 2s infinite',
                        'cart-pop': 'pop 0.3s ease-in-out',
                    },
                    keyframes: {
                        pop: {
                            '0%': { transform: 'scale(1)' },
                            '50%': { transform: 'scale(1.2)' },
                            '100%': { transform: 'scale(1)' },
                        }
                    }
                }
            }
        }
    </script>
    <style>
        html.font-large { font-size: 110%; }
        /* éš±è—æ»¾å‹•æ¢ */
        .no-scrollbar::-webkit-scrollbar { display: none; }
        .no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }
    </style>
</head>
<body class="text-gray-700 bg-white selection:bg-brand-green selection:text-white pb-20 md:pb-0 relative">

    <nav class="fixed w-full z-40 bg-white/95 backdrop-blur shadow-sm transition-all duration-300">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center h-20">
                <div class="flex items-center gap-3">
                    <div class="w-10 h-10 bg-brand-green rounded-full flex items-center justify-center text-white text-xl shadow-lg">
                        <i class="fa-solid fa-leaf"></i>
                    </div>
                    <div>
                        <h1 class="font-bold text-xl tracking-wide text-brand-green leading-none">æ¨‚é½¡ç”Ÿæ´»ç¶²</h1>
                        <p class="text-[10px] text-gray-400 tracking-wider font-medium">LIVING LAB</p>
                    </div>
                </div>
                <div class="hidden md:flex items-center space-x-8 text-sm font-medium text-gray-600">
                    <a href="#mission" class="hover:text-brand-green transition">éƒ½å¸‚å†ç”Ÿ</a>
                    <a href="#shop" class="text-brand-orange font-bold hover:text-orange-600 transition"><i class="fa-solid fa-basket-shopping mr-1"></i> ç‡Ÿé¤Šå°ç­–</a>
                    <a href="#stories" class="hover:text-brand-green transition">æˆåŠŸæ¡ˆä¾‹</a>
                    
                    <div class="flex items-center border-l border-gray-300 pl-6 space-x-2">
                        <button onclick="changeFontSize('base')" class="w-6 h-6 rounded bg-gray-100 hover:bg-brand-green hover:text-white text-xs transition">A</button>
                        <button onclick="changeFontSize('large')" class="w-8 h-8 rounded bg-gray-100 hover:bg-brand-green hover:text-white text-sm transition">A+</button>
                    </div>

                    <div id="nav-auth-section">
                        <button onclick="toggleAuth()" class="flex items-center gap-2 bg-gray-100 hover:bg-gray-200 px-4 py-2 rounded-full transition">
                            <i class="fa-regular fa-user"></i> ç™»å…¥/è¨»å†Š
                        </button>
                    </div>
                </div>
                
                <div class="md:hidden flex items-center gap-4">
                    <button onclick="toggleCart()" class="relative text-gray-600">
                        <i class="fa-solid fa-cart-shopping text-xl"></i>
                        <span id="mobile-cart-count" class="absolute -top-2 -right-2 bg-red-500 text-white text-xs font-bold w-5 h-5 rounded-full flex items-center justify-center hidden">0</span>
                    </button>
                    <button onclick="toggleAuth()" class="text-gray-600">
                        <i class="fa-regular fa-user text-xl"></i>
                    </button>
                    <button id="menu-btn" class="text-gray-600 hover:text-brand-green">
                        <i class="fa-solid fa-bars text-2xl"></i>
                    </button>
                </div>
            </div>
        </div>
    </nav>

    <div id="auth-modal" class="fixed inset-0 bg-black/60 z-50 hidden flex items-center justify-center p-4 backdrop-blur-sm transition-opacity">
        <div class="bg-white rounded-3xl w-full max-w-md overflow-hidden shadow-2xl relative">
            <button onclick="toggleAuth()" class="absolute top-4 right-4 text-gray-400 hover:text-gray-600 z-10 w-8 h-8 flex items-center justify-center bg-gray-100 rounded-full">
                <i class="fa-solid fa-times"></i>
            </button>

            <div class="p-8">
                <div class="text-center mb-8">
                    <h3 class="text-2xl font-bold text-gray-800 mb-2">æ­¡è¿å›åˆ°æ¨‚é½¡ç”Ÿæ´»</h3>
                    <p class="text-gray-500 text-sm">è«‹é¸æ“‡æ‚¨ç¿’æ…£çš„æ–¹å¼ç™»å…¥</p>
                </div>

                <div class="space-y-4 mb-8">
                    <button onclick="mockLogin('LINE')" class="w-full bg-brand-line hover:opacity-90 text-white py-3 rounded-xl font-bold flex items-center justify-center gap-3 transition shadow-md">
                        <i class="fa-brands fa-line text-2xl"></i>
                        ä½¿ç”¨ LINE å¸³è™Ÿä¸€éµç™»å…¥
                    </button>
                    <button onclick="mockLogin('Google')" class="w-full bg-white border border-gray-300 hover:bg-gray-50 text-gray-700 py-3 rounded-xl font-bold flex items-center justify-center gap-3 transition shadow-sm">
                        <i class="fa-brands fa-google text-red-500 text-xl"></i>
                        ä½¿ç”¨ Google å¸³è™Ÿç™»å…¥
                    </button>
                </div>

                <div class="relative flex py-2 items-center mb-6">
                    <div class="flex-grow border-t border-gray-200"></div>
                    <span class="flex-shrink mx-4 text-gray-400 text-xs">æˆ–æ˜¯ä½¿ç”¨æ‰‹æ©Ÿè™Ÿç¢¼</span>
                    <div class="flex-grow border-t border-gray-200"></div>
                </div>

                <form onsubmit="event.preventDefault(); mockLogin('Phone');" class="space-y-4">
                    <div>
                        <input type="tel" placeholder="è«‹è¼¸å…¥æ‰‹æ©Ÿè™Ÿç¢¼" class="w-full px-4 py-3 rounded-xl bg-gray-50 border-transparent focus:border-brand-green focus:bg-white focus:ring-0 text-gray-700 transition">
                    </div>
                    <div>
                        <input type="password" placeholder="è«‹è¼¸å…¥å¯†ç¢¼" class="w-full px-4 py-3 rounded-xl bg-gray-50 border-transparent focus:border-brand-green focus:bg-white focus:ring-0 text-gray-700 transition">
                    </div>
                    <button type="submit" class="w-full bg-gray-800 text-white py-3 rounded-xl font-bold hover:bg-gray-700 transition">
                        ç™»å…¥ / è¨»å†Š
                    </button>
                </form>
                
                <div class="mt-6 text-center">
                    <a href="#" class="text-xs text-gray-400 hover:text-brand-green underline">å¿˜è¨˜å¯†ç¢¼ï¼Ÿ</a>
                </div>
            </div>
            
            <div class="bg-brand-light p-4 text-center text-xs text-brand-green font-medium">
                <i class="fa-solid fa-shield-halved mr-1"></i> æ‚¨çš„è³‡æ–™å°‡å—åˆ°æœ€é«˜è¦æ ¼çš„å®‰å…¨ä¿è­·
            </div>
        </div>
    </div>

    <header class="relative pt-32 pb-16 lg:pt-48 lg:pb-32 overflow-hidden bg-brand-light">
        <div class="absolute right-0 top-0 w-full lg:w-3/5 h-full bg-cover bg-center opacity-10 lg:opacity-100" 
             style="background-image: url('https://images.unsplash.com/photo-1576201836106-db1758fd1c97?ixlib=rb-4.0.3&auto=format&fit=crop&w=1600&q=80'); clip-path: polygon(15% 0, 100% 0, 100% 100%, 0% 100%);">
        </div>
        <div class="max-w-7xl mx-auto px-4 relative z-10">
            <div class="w-full lg:w-1/2 flex flex-col items-start">
                <div class="inline-block bg-white border border-brand-green text-brand-green px-4 py-1.5 rounded-full text-xs font-bold mb-6 shadow-sm">
                    è™å°¾åœ¨åœ°ãƒ»å…¨é½¡å…±è
                </div>
                <h1 class="text-4xl sm:text-5xl lg:text-6xl font-bold leading-tight mb-6 text-gray-900">
                    å…¨é½¡å…±èçš„<br>
                    <span class="text-brand-green">è™å°¾ç”Ÿæ´»åœˆ</span>
                </h1>
                <p class="text-lg text-gray-600 mb-8 max-w-md">ä¸²è¯å¸ƒè¢‹æˆ²é¤¨ã€æ¯›å·¾å·¥å» èˆ‡ç¤¾å€æ“šé»ï¼Œæ‰“é€ å°ˆå±¬æ–¼æ‚¨çš„é…·è€ç”Ÿæ´»ã€‚</p>
                <div class="flex gap-3">
                    <a href="#shop" class="bg-brand-orange text-white px-8 py-3 rounded-full font-bold shadow-lg hover:bg-orange-600 transition flex items-center gap-2">
                        <i class="fa-solid fa-carrot"></i> è¨‚è³¼ç‡Ÿé¤Šé¤é£Ÿ
                    </a>
                </div>
            </div>
        </div>
    </header>

    <section id="shop" class="py-20 bg-white">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="text-center mb-12">
                <span class="text-brand-orange font-bold tracking-widest text-sm uppercase">Nutrition Store</span>
                <h2 class="text-3xl font-bold mt-2 text-gray-900">ç‡Ÿé¤Šå¸«ç²¾é¸ï¼ç”Ÿæ´»å°ç­–çµ„åˆ</h2>
                <p class="text-gray-500 mt-2">é‡å°æ¨‚é½¡æ—ç¾¤è¨­è¨ˆï¼Œç›´æ¥é…é€åˆ°å®¶æˆ–ç¤¾å€æ“šé»</p>
            </div>

            <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
                <div class="bg-white border border-gray-100 rounded-3xl overflow-hidden hover:shadow-xl transition duration-300 group flex flex-col h-full">
                    <div class="relative h-64 overflow-hidden">
                        <img src="https://images.unsplash.com/photo-1511690656952-34342d5c71df?w=800&q=80" class="w-full h-full object-cover group-hover:scale-110 transition duration-500">
                        <span class="absolute top-4 left-4 bg-brand-green text-white px-3 py-1 rounded-full text-xs font-bold shadow-md">äººæ°£ No.1</span>
                    </div>
                    <div class="p-6 flex-1 flex flex-col">
                        <div class="mb-2">
                            <span class="text-xs text-brand-orange bg-orange-50 px-2 py-1 rounded font-bold">æ—©å®‰æ´»åŠ›</span>
                        </div>
                        <h3 class="text-xl font-bold mb-2">æ¨‚é½¡é«˜éˆ£æ—©é¤çµ„</h3>
                        <p class="text-sm text-gray-500 mb-4 flex-1">åŒ…å«æœ‰æ©Ÿè±†æ¼¿ç²‰ã€é»‘èŠéº»ç³Šèˆ‡ç¶œåˆå …æœã€‚è£œå……ä¸€æ—¥æ‰€éœ€éˆ£è³ªã€‚</p>
                        <div class="flex justify-between items-end mt-4">
                            <div>
                                <span class="text-sm text-gray-400 line-through">NT$ 1,200</span>
                                <div class="text-2xl font-bold text-gray-800">NT$ 980</div>
                            </div>
                            <button onclick="addToCart(1, 'æ¨‚é½¡é«˜éˆ£æ—©é¤çµ„', 980, 'https://images.unsplash.com/photo-1511690656952-34342d5c71df?w=200')" class="bg-gray-900 text-white w-12 h-12 rounded-full flex items-center justify-center hover:bg-brand-orange hover:scale-110 transition shadow-lg">
                                <i class="fa-solid fa-plus"></i>
                            </button>
                        </div>
                    </div>
                </div>
                <div class="bg-white border border-gray-100 rounded-3xl overflow-hidden hover:shadow-xl transition duration-300 group flex flex-col h-full">
                    <div class="relative h-64 overflow-hidden">
                        <img src="https://images.unsplash.com/photo-1544161515-4ab6ce6db874?w=800&q=80" class="w-full h-full object-cover group-hover:scale-110 transition duration-500">
                    </div>
                    <div class="p-6 flex-1 flex flex-col">
                        <div class="mb-2">
                            <span class="text-xs text-blue-500 bg-blue-50 px-2 py-1 rounded font-bold">è¡Œå‹•åŠ›å°ç­–</span>
                        </div>
                        <h3 class="text-xl font-bold mb-2">é—œéµç’°ç¯€ä¿é¤Šçµ„</h3>
                        <p class="text-sm text-gray-500 mb-4 flex-1">è‘¡è„ç³–èƒºé£² + æ·±æµ·é­šæ²¹ã€‚é‡å°è¡Œå‹•å¡å¡è¨­è¨ˆã€‚</p>
                        <div class="flex justify-between items-end mt-4">
                            <div>
                                <span class="text-sm text-gray-400 line-through">NT$ 2,500</span>
                                <div class="text-2xl font-bold text-gray-800">NT$ 1,880</div>
                            </div>
                            <button onclick="addToCart(2, 'é—œéµç’°ç¯€ä¿é¤Šçµ„', 1880, 'https://images.unsplash.com/photo-1544161515-4ab6ce6db874?w=200')" class="bg-gray-900 text-white w-12 h-12 rounded-full flex items-center justify-center hover:bg-brand-orange hover:scale-110 transition shadow-lg">
                                <i class="fa-solid fa-plus"></i>
                            </button>
                        </div>
                    </div>
                </div>
                <div class="bg-white border border-gray-100 rounded-3xl overflow-hidden hover:shadow-xl transition duration-300 group flex flex-col h-full">
                    <div class="relative h-64 overflow-hidden">
                        <img src="https://images.unsplash.com/photo-1512621776951-a57141f2eefd?w=800&q=80" class="w-full h-full object-cover group-hover:scale-110 transition duration-500">
                        <span class="absolute top-4 left-4 bg-brand-yellow text-white px-3 py-1 rounded-full text-xs font-bold shadow-md">å¥½çœ æ¨è–¦</span>
                    </div>
                    <div class="p-6 flex-1 flex flex-col">
                        <div class="mb-2">
                            <span class="text-xs text-purple-500 bg-purple-50 px-2 py-1 rounded font-bold">æ™šå®‰èˆ’å¿ƒ</span>
                        </div>
                        <h3 class="text-xl font-bold mb-2">GABA èˆ’çœ æ™šå®‰èŒ¶</h3>
                        <p class="text-sm text-gray-500 mb-4 flex-1">ç„¡å’–å•¡å› è‰æœ¬èŒ¶ï¼Œæ·»åŠ  GABA èˆ‡æ´‹ç”˜èŠã€‚</p>
                        <div class="flex justify-between items-end mt-4">
                            <div>
                                <span class="text-sm text-gray-400 line-through">NT$ 800</span>
                                <div class="text-2xl font-bold text-gray-800">NT$ 650</div>
                            </div>
                            <button onclick="addToCart(3, 'GABA èˆ’çœ æ™šå®‰èŒ¶', 650, 'https://images.unsplash.com/photo-1512621776951-a57141f2eefd?w=200')" class="bg-gray-900 text-white w-12 h-12 rounded-full flex items-center justify-center hover:bg-brand-orange hover:scale-110 transition shadow-lg">
                                <i class="fa-solid fa-plus"></i>
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <section id="stories" class="py-20 bg-gray-50">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="text-center mb-10">
                <span class="text-brand-orange font-bold tracking-widest text-sm uppercase">Success Story</span>
                <h2 class="text-3xl font-bold mt-2">çœ‹è¦‹ç‹å¥¶å¥¶çš„çœŸå¯¦æ”¹è®Š</h2>
            </div>
            
            <div class="bg-white rounded-[2.5rem] p-6 md:p-12 shadow-sm border border-gray-100">
                <div class="flex flex-col lg:flex-row items-center gap-12">
                    <div class="lg:w-1/2 relative w-full h-80 rounded-2xl overflow-hidden shadow-lg">
                        <img src="https://images.unsplash.com/photo-1545224144-b38cd309a967?w=800&q=80" class="w-full h-full object-cover">
                        <div class="absolute bottom-0 left-0 bg-black/60 text-white p-4 w-full">
                            <p class="font-bold text-lg">ç‹ç§€è˜­ (85æ­²)</p>
                            <p class="text-sm text-brand-yellow">åƒèˆ‡ç‡Ÿé¤Šè¨ˆç•« 3 å€‹æœˆ</p>
                        </div>
                    </div>
                    <div class="lg:w-1/2">
                        <h3 class="text-2xl font-bold mb-4 text-gray-900">ã€Œç‡Ÿé¤Šå°äº†ï¼Œé«”åŠ›å°±å›ä¾†äº†ã€</h3>
                        <p class="text-gray-600 italic leading-relaxed mb-6">
                            ã€Œä»¥å‰åƒæ±è¥¿éƒ½éš¨ä¾¿åƒï¼Œå¸¸è¦ºå¾—æ²’åŠ›æ°£ã€‚å¾Œä¾†è¨‚äº†é«˜éˆ£æ—©é¤çµ„ï¼Œæ¯å¤©æ—©ä¸Šæ³¡ä¸€æ¯å¾ˆæ–¹ä¾¿ã€‚ç¾åœ¨å»å…¬åœ’åšæ¯›å·¾æ“ï¼Œå¤§å®¶éƒ½èªªæˆ‘æ°£è‰²è®Šå¥½äº†ï¼ã€
                        </p>
                        <button class="text-brand-green font-bold hover:underline">æŸ¥çœ‹æ›´å¤šæ¡ˆä¾‹ <i class="fa-solid fa-arrow-right ml-1"></i></button>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <footer class="bg-gray-900 text-white py-12 pb-24 md:pb-12">
        <div class="max-w-7xl mx-auto px-4 text-center md:text-left">
            <p class="text-sm text-gray-500">Â© 2026 æ¨‚é½¡ç”Ÿæ´»ç¶². All rights reserved.</p>
        </div>
    </footer>

    <div onclick="toggleCart()" class="fixed bottom-24 md:bottom-6 right-6 z-30 bg-gray-900 text-white w-16 h-16 rounded-full shadow-2xl flex items-center justify-center cursor-pointer hover:scale-110 transition duration-300 border-2 border-white animate-bounce-slow" id="floating-cart-btn">
        <i class="fa-solid fa-cart-shopping text-2xl"></i>
        <span id="cart-badge" class="absolute -top-1 -right-1 bg-red-500 text-white text-xs font-bold w-6 h-6 rounded-full flex items-center justify-center hidden border-2 border-gray-900">0</span>
    </div>

    <div id="cart-drawer" class="fixed inset-y-0 right-0 w-full md:w-96 bg-white shadow-2xl z-50 transform translate-x-full transition-transform duration-300 flex flex-col">
        <div class="p-5 border-b flex justify-between items-center bg-brand-green text-white">
            <div class="flex items-center gap-2">
                <i class="fa-solid fa-basket-shopping"></i>
                <span class="font-bold text-lg">æ‚¨çš„è³¼ç‰©è»Š</span>
            </div>
            <button onclick="toggleCart()" class="text-white hover:text-gray-200"><i class="fa-solid fa-times text-xl"></i></button>
        </div>
        <div id="cart-items" class="flex-1 overflow-y-auto p-5 space-y-4"></div>
        <div class="p-5 border-t bg-gray-50">
            <div class="flex justify-between items-center mb-4">
                <span class="text-gray-600">ç¸½é‡‘é¡</span>
                <span id="cart-total" class="text-2xl font-bold text-brand-orange">NT$ 0</span>
            </div>
            <button onclick="checkout()" class="w-full bg-brand-orange text-white py-3 rounded-xl font-bold shadow-lg hover:bg-orange-600 transition">
                å‰å¾€çµå¸³
            </button>
        </div>
    </div>
    
    <div id="cart-overlay" onclick="toggleCart()" class="fixed inset-0 bg-black/50 z-40 hidden backdrop-blur-sm transition-opacity"></div>

    <div class="fixed bottom-0 left-0 w-full bg-white border-t border-gray-200 p-3 flex md:hidden gap-3 z-30 shadow-[0_-5px_10px_rgba(0,0,0,0.05)]">
        <button class="flex-1 bg-gray-100 text-gray-700 py-3 rounded-lg font-bold flex items-center justify-center gap-2 hover:bg-gray-200">
            <i class="fa-solid fa-phone"></i> é›»è©±
        </button>
        <button class="flex-1 bg-brand-green text-white py-3 rounded-lg font-bold flex items-center justify-center gap-2 shadow-lg hover:bg-green-700">
            <i class="fa-solid fa-calendar-check"></i> é ç´„
        </button>
    </div>

    <script>
        // å­—é«”æ§åˆ¶
        function changeFontSize(size) {
            const html = document.querySelector('html');
            html.classList.remove('font-large');
            if (size === 'large') html.classList.add('font-large');
        }

        // --- ğŸ” æœƒå“¡ç³»çµ±é‚è¼¯ ---
        
        function toggleAuth() {
            const modal = document.getElementById('auth-modal');
            if (modal.classList.contains('hidden')) {
                modal.classList.remove('hidden');
            } else {
                modal.classList.add('hidden');
            }
        }

        function mockLogin(provider) {
            // æ¨¡æ“¬ç™»å…¥éç¨‹
            const modal = document.getElementById('auth-modal');
            const originalText = document.querySelector(`button[onclick="mockLogin('${provider}')"]`).innerHTML;
            
            // é¡¯ç¤ºè¼‰å…¥ä¸­
            document.querySelector(`button[onclick="mockLogin('${provider}')"]`).innerHTML = '<i class="fa-solid fa-circle-notch fa-spin"></i> ç™»å…¥ä¸­...';
            
            setTimeout(() => {
                modal.classList.add('hidden');
                
                // æ›´æ–°å°èˆªåˆ—ç‹€æ…‹ (è®Šæ›´ç‚ºå·²ç™»å…¥)
                const navSection = document.getElementById('nav-auth-section');
                navSection.innerHTML = `
                    <div class="flex items-center gap-3">
                        <img src="https://i.pravatar.cc/150?u=a042581f4e29026704d" class="w-10 h-10 rounded-full border-2 border-brand-green">
                        <div class="hidden md:block">
                            <p class="text-xs text-gray-500">æ­¡è¿å›ä¾†</p>
                            <p class="font-bold text-brand-green text-sm">ç‹å¥¶å¥¶</p>
                        </div>
                        <button onclick="alert('ç™»å‡ºæˆåŠŸ')" class="text-gray-400 hover:text-red-500 ml-2">
                            <i class="fa-solid fa-sign-out-alt"></i>
                        </button>
                    </div>
                `;
                
                alert(`æ­¡è¿å›ä¾†ï¼æ‚¨å·²æˆåŠŸä½¿ç”¨ ${provider} ç™»å…¥ã€‚`);
                
            }, 1500);
        }

        // --- ğŸ›’ è³¼ç‰©è»Šé‚è¼¯ ---
        let cart = [];

        function addToCart(id, name, price, img) {
            const existingItem = cart.find(item => item.id === id);
            if (existingItem) {
                existingItem.quantity += 1;
            } else {
                cart.push({ id, name, price, img, quantity: 1 });
            }
            updateCartUI();
            openCart();
            
            const btn = document.getElementById('floating-cart-btn');
            btn.classList.remove('animate-bounce-slow');
            btn.classList.add('animate-cart-pop');
            setTimeout(() => {
                btn.classList.remove('animate-cart-pop');
                btn.classList.add('animate-bounce-slow');
            }, 300);
        }

        function removeFromCart(id) {
            cart = cart.filter(item => item.id !== id);
            updateCartUI();
        }

        function changeQuantity(id, change) {
            const item = cart.find(item => item.id === id);
            if (item) {
                item.quantity += change;
                if (item.quantity <= 0) {
                    removeFromCart(id);
                } else {
                    updateCartUI();
                }
            }
        }

        function updateCartUI() {
            const container = document.getElementById('cart-items');
            const badge = document.getElementById('cart-badge');
            const mobileBadge = document.getElementById('mobile-cart-count');
            const totalDisplay = document.getElementById('cart-total');
            
            container.innerHTML = '';
            let totalAmount = 0;
            let totalCount = 0;

            if (cart.length === 0) {
                container.innerHTML = `
                    <div class="text-center text-gray-400 mt-20">
                        <i class="fa-solid fa-cart-arrow-down text-4xl mb-3 opacity-30"></i>
                        <p>è³¼ç‰©è»Šç›®å‰ç©ºç©ºçš„</p>
                        <button onclick="toggleCart()" class="mt-4 text-brand-green font-bold text-sm">å»é€›é€›ç‡Ÿé¤Šå°ç­– ></button>
                    </div>
                `;
            } else {
                cart.forEach(item => {
                    totalAmount += item.price * item.quantity;
                    totalCount += item.quantity;
                    const el = document.createElement('div');
                    el.className = 'flex gap-4 items-center bg-white p-3 rounded-xl border border-gray-100 shadow-sm';
                    el.innerHTML = `
                        <img src="${item.img}" class="w-16 h-16 object-cover rounded-lg">
                        <div class="flex-1">
                            <h4 class="font-bold text-sm text-gray-800 line-clamp-1">${item.name}</h4>
                            <div class="text-brand-orange font-bold text-sm">NT$ ${item.price}</div>
                        </div>
                        <div class="flex items-center gap-2 bg-gray-100 rounded-lg px-2 py-1">
                            <button onclick="changeQuantity(${item.id}, -1)" class="w-5 h-5 flex items-center justify-center text-gray-500 hover:text-black">-</button>
                            <span class="text-sm font-bold w-4 text-center">${item.quantity}</span>
                            <button onclick="changeQuantity(${item.id}, 1)" class="w-5 h-5 flex items-center justify-center text-gray-500 hover:text-black">+</button>
                        </div>
                        <button onclick="removeFromCart(${item.id})" class="text-gray-400 hover:text-red-500 ml-2"><i class="fa-solid fa-trash-can"></i></button>
                    `;
                    container.appendChild(el);
                });
            }
            totalDisplay.innerText = 'NT$ ' + totalAmount.toLocaleString();
            if (totalCount > 0) {
                badge.innerText = totalCount; badge.classList.remove('hidden');
                mobileBadge.innerText = totalCount; mobileBadge.classList.remove('hidden');
            } else {
                badge.classList.add('hidden'); mobileBadge.classList.add('hidden');
            }
        }

        function toggleCart() {
            const drawer = document.getElementById('cart-drawer');
            const overlay = document.getElementById('cart-overlay');
            if (drawer.classList.contains('translate-x-full')) {
                drawer.classList.remove('translate-x-full');
                overlay.classList.remove('hidden');
            } else {
                drawer.classList.add('translate-x-full');
                overlay.classList.add('hidden');
            }
        }
        
        function openCart() {
            document.getElementById('cart-drawer').classList.remove('translate-x-full');
            document.getElementById('cart-overlay').classList.remove('hidden');
        }

        function checkout() {
            if (cart.length === 0) return alert('è³¼ç‰©è»Šæ˜¯ç©ºçš„å–”ï¼');
            if (confirm(`ç¸½é‡‘é¡ç‚º NT$ ${document.getElementById('cart-total').innerText}ï¼Œç¢ºå®šè¦é€å‡ºè¨‚å–®å—ï¼Ÿ`)) {
                alert('æ„Ÿè¬æ‚¨çš„è¨‚è³¼ï¼æˆ‘å€‘å°‡å„˜å¿«ç‚ºæ‚¨å®‰æ’é…é€ã€‚');
                cart = []; updateCartUI(); toggleCart();
            }
        }
    </script>
</body>
</html>
